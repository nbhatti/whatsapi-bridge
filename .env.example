# ========================================
# WhatsAPI Bridge - Environment Configuration
# ========================================
# Copy this file to .env and update with your configuration
# Never commit .env files to version control!

# ----------------------------------------
# Server Configuration
# ----------------------------------------
NODE_ENV=development
PORT=3000
HOST=localhost

# ----------------------------------------
# Redis Configuration (Required)
# ----------------------------------------
# Redis connection URL - used for session persistence and caching
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Redis cache feature flags and performance settings
REDIS_ENABLED=true
SYNC_INTERVAL_MS=5000
MAX_LIST_LENGTH=1000
REDIS_MAX_RETRIES=5
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000

# ----------------------------------------
# WhatsApp Configuration
# ----------------------------------------
# Directory to store WhatsApp session files
SESSION_PATH=./sessions
WHATSAPP_TIMEOUT=60000
WHATSAPP_SESSION_PATH=./sessions
WHATSAPP_CLIENT_NAME=WhatsAPI-Bridge

# Webhook configuration for message notifications
WEBHOOK_URL=
WEBHOOK_ENCRYPTION_KEY=your-32-byte-webhook-encryption-key

# ----------------------------------------
# Security Configuration
# ----------------------------------------
# API key for authenticating requests (CHANGE THIS!)
API_KEY=your-super-secure-api-key-change-this-immediately

# JWT configuration
JWT_SECRET=your-super-secret-jwt-key-change-this
JWT_EXPIRE=7d

# ----------------------------------------
# Socket.IO Configuration
# ----------------------------------------
# CORS origin for Socket.IO connections
CORS_ORIGIN=http://localhost:3000
CORS_ORIGINS=*
SOCKET_IO_CORS_ORIGIN=http://localhost:3000

# ----------------------------------------
# Rate Limiting
# ----------------------------------------
# Rate limit window in milliseconds (15 minutes = 900000)
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_ENABLED=true
TRUSTED_IPS=127.0.0.1,::1

# ----------------------------------------
# Logging Configuration
# ----------------------------------------
# Log level: error, warn, info, debug, verbose
LOG_LEVEL=info
LOG_FILE_PATH=./logs
LOG_CONSOLE=true

# ----------------------------------------
# AI Configuration (Multiple Providers)
# ----------------------------------------
# Primary AI provider (openai, openrouter, xai)
AI_PROVIDER=openrouter
AI_API_KEY=your-ai-api-key
AI_BASE_URL=https://openrouter.ai/api/v1
AI_MODEL=meta-llama/llama-3.1-8b-instruct:free
AI_MAX_TOKENS=4000
AI_TEMPERATURE=0.1

# OpenAI Configuration
OPENAI_API_KEY=your-openai-api-key
OPENAI_MODEL=gpt-4o-mini

# X.AI (Grok) Configuration
X_API_KEY=your-x-ai-api-key
X_MODEL=grok-3-mini

# OpenRouter Configuration
OPENROUTER_API_KEY=your-openrouter-api-key
OPENROUTER_MODEL=meta-llama/llama-3.1-8b-instruct:free
OPENROUTER_SITE_URL=https://openrouter.ai/api/v1
OPENROUTER_APP_NAME=WhatsAPI-Bridge

# ----------------------------------------
# Analytics Configuration
# ----------------------------------------
# Unified default limit for all analytics endpoints (configurable via API ?limit= parameter)
ANALYTICS_DEFAULT_LIMIT=20
ANALYTICS_DEFAULT_DAYS=30
ANALYTICS_MAX_LIMIT=50

# ----------------------------------------
# Blocking Prevention Configuration
# ----------------------------------------
# Message queue delays (in milliseconds)
MESSAGE_MIN_DELAY=1000
MESSAGE_MAX_DELAY=10000
MESSAGE_MAX_ATTEMPTS=3
MESSAGE_RETRY_DELAY=5000

# Device rate limiting
MESSAGES_PER_MINUTE=10
MESSAGE_BURST_LIMIT=3

# Human-like behavior simulation
ENABLE_TYPING_DELAY=true
ENABLE_READ_RECEIPT_DELAY=true

# ----------------------------------------
# Feature Flags
# ----------------------------------------
# Enable/disable specific features
FEATURE_AI_ENABLED=true
FEATURE_GROUPS_ENABLED=true
FEATURE_MEDIA_ENABLED=true
FEATURE_WEBHOOKS_ENABLED=false
FEATURE_BLOCKING_PREVENTION=true

# ----------------------------------------
# Health Check Configuration
# ----------------------------------------
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_DETAILED=true
ENABLE_HEALTH_CHECKS=true
ENABLE_METRICS=true

# ----------------------------------------
# Performance Monitoring
# ----------------------------------------
# Memory and performance thresholds
MAX_MEMORY_USAGE_MB=1024
REDIS_MEMORY_THRESHOLD_MB=512
TARGET_TPS=500

# Sync worker configuration
SYNC_WORKER_ENABLED=true
SYNC_LAG_THRESHOLD_MS=1000

# ----------------------------------------
# Production Configuration
# ----------------------------------------
# HTTPS Configuration (for production)
HTTPS_ENABLED=false
SSL_CERT_PATH=
SSL_KEY_PATH=

# Body size limits (in MB)
BODY_SIZE_LIMIT=10

# Database configuration
DATABASE_URL=

# ----------------------------------------
# Third-Party Integrations (Optional)
# ----------------------------------------
# Error tracking
SENTRY_DSN=

# Analytics and monitoring
GA_TRACKING_ID=
MONITORING_URL=
APP_NAME=whatsapi-bridge
GRAFANA_PASSWORD=change-this-password
ACME_EMAIL=admin@yourdomain.com

# ----------------------------------------
# Development Configuration
# ----------------------------------------
# Debug mode (additional logging)
DEBUG_MODE=false

# Mock WhatsApp for testing
MOCK_WHATSAPP=false

# ----------------------------------------
# Test Environment Overrides
# ----------------------------------------
# These values are used in test environment
# TEST_PORT=3001
# TEST_REDIS_DB=1
# TEST_LOG_LEVEL=error
# TEST_SESSION_PATH=.wwebjs_test_auth

# ----------------------------------------
# SECURITY NOTES:
# ----------------------------------------
# 1. Change ALL default passwords and keys!
# 2. Use strong, unique API keys for production
# 3. Enable HTTPS in production
# 4. Use Redis with authentication in production
# 5. Set proper CORS origins for production
# 6. Never commit .env files to git
# 7. Use environment-specific files (.env.production, .env.staging)
# 8. Regularly rotate API keys and secrets
# 9. Monitor for suspicious activity
# 10. Use proper firewall rules in production
# ----------------------------------------
